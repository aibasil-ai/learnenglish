# 英文單字學習 App 設計文件

**日期**: 2026-02-26
**專案**: english-vocabulary-learning
**目標**: 建立遊戲化英文單字學習應用，含 2000 個新聞常見單字

---

## 1. 整體架構

### 頁面結構

```
App.jsx
├── HomeScreen (首頁)
│   ├── 關卡地圖 (顯示所有關卡進度)
│   ├── 統計數據 (已學單字數、總正確率)
│   └── 設定按鈕
│
├── LevelScreen (關卡頁)
│   ├── 學習模式 (單字卡片翻頁)
│   └── 測驗模式 (4種測驗)
│
├── QuizScreen (測驗頁)
│   ├── ListeningQuiz (聽力測驗)
│   ├── MeaningQuiz (字義測驗)
│   ├── WordQuiz (認字測驗)
│   └── SpellingQuiz (拼寫測驗)
│
├── ResultScreen (結果頁)
│   ├── 分數顯示
│   ├── 錯誤回顧
│   └── 下一步按鈕
│
└── SettingsScreen (設定頁)
    ├── 口音切換 (美式/英式)
    ├── 深色模式
    └── 重置進度
```

### 資料流

```
words data (單字資料庫)
    ↓
AppContext (全域狀態)
    ↓
各頁面元件
```

---

## 2. 單字資料結構

### 單字資料格式

```javascript
// src/data/levels/01-basic-1.js
export const level1 = {
  id: 1,
  name: "基礎新聞用語 (一)",
  category: "基礎新聞用語",
  words: [
    {
      id: "w0001",
      word: "government",
      phonetic: "/ˈɡʌvərnmənt/",
      meaning: "政府",
      partOfSpeech: "n.",
      example: "The government announced new policies.",
      exampleMeaning: "政府宣布了新政策。"
    },
    // ... 更多單字
  ]
}
```

### 關卡規劃 (2000 個單字)

| 關卡 | 主題 | 單字數 |
|-----|------|-------|
| 1-5 | 基礎新聞用語 | 100 (每關 20) |
| 6-10 | 經濟與商業 | 100 |
| 11-15 | 政治與國際 | 100 |
| 16-20 | 科技與創新 | 100 |
| 21-25 | 社會與生活 | 100 |
| 26-30 | 環境與氣候 | 100 |
| 31-35 | 健康與醫療 | 100 |
| 36-40 | 法律與司法 | 100 |
| 41-45 | 教育與文化 | 100 |
| 46-50 | 媒體與傳播 | 100 |
| 51-55 | 軍事與安全 | 100 |
| 56-60 | 體育與娛樂 | 100 |
| 61-65 | 交通與旅遊 | 100 |
| 66-70 | 能源與資源 | 100 |
| 71-75 | 農業與食品 | 100 |
| 76-80 | 建築與城市 | 100 |
| 81-85 | 金融與投資 | 100 |
| 86-90 | 外交與條約 | 100 |
| 91-95 | 災難與救援 | 100 |
| 96-100 | 進階綜合 | 100 |

**總計：100 關 × 20 單字 = 2000 單字**

### 檔案結構

```
src/data/
├── index.js           # 整合所有關卡
└── levels/
    ├── 01-basic-1.js      # 關卡 1-5
    ├── 02-economy.js      # 關卡 6-10
    ├── 03-politics.js     # 關卡 11-15
    ├── 04-technology.js   # 關卡 16-20
    ├── 05-society.js      # 關卡 21-25
    ├── 06-environment.js  # 關卡 26-30
    ├── 07-health.js       # 關卡 31-35
    ├── 08-law.js          # 關卡 36-40
    ├── 09-education.js    # 關卡 41-45
    ├── 10-media.js        # 關卡 46-50
    ├── 11-military.js     # 關卡 51-55
    ├── 12-sports.js       # 關卡 56-60
    ├── 13-transport.js    # 關卡 61-65
    ├── 14-energy.js       # 關卡 66-70
    ├── 15-agriculture.js  # 關卡 71-75
    ├── 16-architecture.js # 關卡 76-80
    ├── 17-finance.js      # 關卡 81-85
    ├── 18-diplomacy.js    # 關卡 86-90
    ├── 19-disaster.js     # 關卡 91-95
    └── 20-advanced.js     # 關卡 96-100
```

### 進度儲存結構

```javascript
// localStorage 結構
{
  unlockedLevels: [1],           // 已解鎖關卡
  completedLevels: [],           // 已完成關卡
  levelProgress: {
    "1": { learned: ["w0001", "w0002"], quizPassed: false }
  },
  stats: {
    totalWordsLearned: 0,
    totalQuizzesTaken: 0,
    averageScore: 0
  }
}
```

---

## 3. 測驗機制

### 四種測驗類型

| 類型 | 題目形式 | 選項 | 互動方式 |
|-----|---------|------|---------|
| **Listening** | 播放單字發音 | 4 個中文選項 | 點選正確意思 |
| **Meaning** | 顯示英文單字 | 4 個中文選項 | 點選正確意思 |
| **Word** | 顯示中文意思 | 4 個英文選項 | 點選正確單字 |
| **Spelling** | 播放發音 + 顯示中文 | 鍵盤輸入 | 輸入正確拼寫 |

### 測驗流程

```
開始測驗
    ↓
從該關卡單字中抽取 10 題
    ↓
隨機分配題型 (每種 2-3 題)
    ↓
逐題作答
    ↓
即時顯示對錯 (綠色打勾/紅色搖晃動畫)
    ↓
完成後顯示結果
    ↓
達 80% 以上 → 解鎖下一關
達 60-79% → 可重考或繼續學習
低於 60% → 建議重新學習
```

### 答題回饋

- **正確**: 綠色背景 + pulse 動畫 + 成功音效（可選）
- **錯誤**: 紅色背景 + shake 動畫 + 顯示正確答案
- **拼寫題**: 顯示逐字母比對，標記錯誤位置

---

## 4. UI 介面設計

### 首頁 (HomeScreen)

```
┌─────────────────────────────────┐
│  ⚙️                    🌙      │  ← 設定、深色模式切換
├─────────────────────────────────┤
│                                 │
│     🎓 英文單字大挑戰           │  ← 標題
│                                 │
│     已學 156 / 2000 單字        │  ← 進度統計
│     ████████░░░░░░░░░ 7.8%     │
│                                 │
├─────────────────────────────────┤
│                                 │
│  關卡地圖 (可捲動)              │
│                                 │
│    ⭐ 關卡 1 - 基礎新聞 (完成)  │
│    ⭐ 關卡 2 - 基礎新聞 (完成)  │
│    🔓 關卡 3 - 基礎新聞 (進行中)│
│    🔒 關卡 4 - 基礎新聞 (鎖定)  │
│    🔒 關卡 5 - 基礎新聞 (鎖定)  │
│    ...                          │
│                                 │
└─────────────────────────────────┘
```

### 關卡頁 (LevelScreen)

```
┌─────────────────────────────────┐
│  ← 返回          關卡 3        │
├─────────────────────────────────┤
│                                 │
│  📚 學習進度: 12/20             │
│  ████████████░░░░░░░ 60%       │
│                                 │
├─────────────────────────────────┤
│                                 │
│  ┌─────────────────────────┐   │
│  │                         │   │
│  │    government           │   │  ← 單字卡 (可點擊發音)
│  │    /ˈɡʌvərnmənt/       │   │
│  │                         │   │
│  │    🔊 點擊聽發音         │   │
│  │                         │   │
│  │    ─────────────────    │   │
│  │    政府 (n.)            │   │  ← 點擊翻轉顯示
│  │    The government...    │   │
│  │                         │   │
│  └─────────────────────────┘   │
│                                 │
│       ◀️  3/20  ▶️              │  ← 上下頁
│                                 │
├─────────────────────────────────┤
│                                 │
│    [ 📝 開始測驗 ]              │  ← 學完後啟用
│                                 │
└─────────────────────────────────┘
```

### 測驗頁 (QuizScreen)

```
┌─────────────────────────────────┐
│  ✕ 退出           5/10         │
│  ████████████░░░░░░░░          │  ← 進度條
├─────────────────────────────────┤
│                                 │
│         🔊                      │  ← 聽力題：播放按鈕
│    (點擊播放發音)               │
│                                 │
│    請選擇正確的意思：           │
│                                 │
│  ┌─────────────────────────┐   │
│  │      A. 政府             │   │
│  └─────────────────────────┘   │
│  ┌─────────────────────────┐   │
│  │      B. 議會             │   │
│  └─────────────────────────┘   │
│  ┌─────────────────────────┐   │
│  │      C. 法院             │   │
│  └─────────────────────────┘   │
│  ┌─────────────────────────┐   │
│  │      D. 總統             │   │
│  └─────────────────────────┘   │
│                                 │
└─────────────────────────────────┘
```

### 結果頁 (ResultScreen)

```
┌─────────────────────────────────┐
│                                 │
│           🎉                    │
│                                 │
│       測驗完成！                │
│                                 │
│     ┌───────────────┐          │
│     │               │          │
│     │    85%        │          │  ← 圓形進度條
│     │   8/10 正確   │          │
│     │               │          │
│     └───────────────┘          │
│                                 │
│     ⭐⭐⭐ 表現優異！            │  ← 3 星評價
│     🔓 已解鎖關卡 4             │
│                                 │
├─────────────────────────────────┤
│                                 │
│  [ 📋 查看錯題 ]                │
│                                 │
│  [ 🏠 返回首頁 ]  [ ▶️ 下一關 ] │
│                                 │
└─────────────────────────────────┘
```

### 顏色與動畫

- **主色調**: 藍色 (#3B82F6)
- **成功色**: 綠色 (#10B981)
- **錯誤色**: 紅色 (#EF4444)
- **星星**: 金色 (#F59E0B)
- **動畫**: shake、correct-pulse、toast (已在 CSS 定義)

---

## 5. 元件清單與檔案結構

### 完整檔案結構

```
src/
├── App.jsx                    # 主路由切換
├── main.jsx                   # 入口 (已存在)
├── index.css                  # 樣式 (已存在)
│
├── components/
│   ├── HomeScreen.jsx         # 首頁
│   ├── LevelScreen.jsx        # 關卡學習頁
│   ├── SettingsScreen.jsx     # 設定頁
│   ├── ResultScreen.jsx       # 測驗結果頁
│   │
│   ├── Quiz/
│   │   ├── QuizScreen.jsx     # 測驗主容器
│   │   ├── ListeningQuiz.jsx  # 聽力測驗
│   │   ├── MeaningQuiz.jsx    # 字義測驗
│   │   ├── WordQuiz.jsx       # 認字測驗
│   │   └── SpellingQuiz.jsx   # 拼寫測驗
│   │
│   └── shared/
│       ├── Button.jsx         # 通用按鈕
│       ├── Card.jsx           # 卡片元件
│       ├── ProgressBar.jsx    # 進度條
│       ├── LevelCard.jsx      # 關卡卡片
│       ├── WordCard.jsx       # 單字卡片
│       └── Toast.jsx          # 提示訊息
│
├── contexts/
│   └── AppContext.jsx         # (已存在，需擴充)
│
├── hooks/
│   ├── useSpeech.js           # (已存在)
│   └── useQuiz.js             # 測驗邏輯 hook
│
├── utils/
│   └── helpers.js             # (已存在)
│
└── data/
    ├── index.js               # 整合所有關卡
    └── levels/
        ├── 01-basic-1.js      # 關卡 1-5
        ├── 02-economy.js      # 關卡 6-10
        └── ...                # (共 20 個檔案)
```

### 需要建立的檔案數量

| 類別 | 檔案數 |
|-----|-------|
| 頁面元件 | 5 |
| 測驗元件 | 5 |
| 共用元件 | 6 |
| Hooks | 1 |
| 資料檔 | 21 |
| **總計** | **38 個新檔案** |

---

## 6. 開發順序

1. **單字資料** - 建立 2000 單字資料庫 (20 個檔案)
2. **共用元件** - Button, Card, ProgressBar, LevelCard, WordCard, Toast
3. **AppContext 擴充** - 新增關卡進度管理
4. **首頁** - HomeScreen
5. **關卡頁** - LevelScreen
6. **測驗系統** - QuizScreen + 4 種測驗 + useQuiz hook
7. **結果頁** - ResultScreen
8. **設定頁** - SettingsScreen

---

## 7. 技術決策

- **狀態管理**: 使用現有 AppContext + useReducer
- **路由**: 使用 state-based routing (無需 react-router)
- **樣式**: Tailwind CSS (已配置)
- **語音**: Web Speech API (已實作 useSpeech hook)
- **持久化**: localStorage (已實作)
- **動畫**: CSS animations (已定義)
